jQuery(function(e){if("undefined"==typeof rp_single_food_params)return!1;e("body").on("init",".rp-tabs-wrapper, .restaurantpress-tabs",function(){e(".rp-tab, .restaurantpress-tabs .panel:not(.panel .panel)").hide();var t=window.location.hash,i=window.location.href,o=e(this).find(".rp-tabs, ul.tabs").first();t.toLowerCase().indexOf("comment-")>=0||"#reviews"===t||"#tab-reviews"===t?o.find("li.reviews_tab a").click():i.indexOf("comment-page-")>0||i.indexOf("cpage=")>0?o.find("li.reviews_tab a").click():"#tab-additional_information"===t?o.find("li.additional_information_tab a").click():o.find("li:first a").click()}).on("click",".rp-tabs li a, ul.tabs li a",function(t){t.preventDefault();var i=e(this),o=i.closest(".rp-tabs-wrapper, .restaurantpress-tabs");o.find(".rp-tabs, ul.tabs").find("li").removeClass("active"),o.find(".rp-tab, .panel:not(.panel .panel)").hide(),i.closest("li").addClass("active"),o.find(i.attr("href")).show()}),e(".rp-tabs-wrapper, .restaurantpress-tabs").trigger("init");var t=function(t,i){this.$target=t,this.$images=e(".restaurantpress-food-gallery__image",t),0!==this.$images.length?(t.data("food_gallery",this),this.flexslider_enabled=e.isFunction(e.fn.flexslider)&&rp_single_food_params.flexslider_enabled,this.zoom_enabled=e.isFunction(e.fn.zoom)&&rp_single_food_params.zoom_enabled,this.photoswipe_enabled="undefined"!=typeof PhotoSwipe&&rp_single_food_params.photoswipe_enabled,i&&(this.flexslider_enabled=!1!==i.flexslider_enabled&&this.flexslider_enabled,this.zoom_enabled=!1!==i.zoom_enabled&&this.zoom_enabled,this.photoswipe_enabled=!1!==i.photoswipe_enabled&&this.photoswipe_enabled),this.initFlexslider=this.initFlexslider.bind(this),this.initZoom=this.initZoom.bind(this),this.initZoomForTarget=this.initZoomForTarget.bind(this),this.initPhotoswipe=this.initPhotoswipe.bind(this),this.onResetSlidePosition=this.onResetSlidePosition.bind(this),this.getGalleryItems=this.getGalleryItems.bind(this),this.openPhotoswipe=this.openPhotoswipe.bind(this),this.flexslider_enabled?(this.initFlexslider(),t.on("restaurantpress_gallery_reset_slide_position",this.onResetSlidePosition)):this.$target.css("opacity",1),this.zoom_enabled&&(this.initZoom(),t.on("restaurantpress_gallery_init_zoom",this.initZoom)),this.photoswipe_enabled&&this.initPhotoswipe()):this.$target.css("opacity",1)};t.prototype.initFlexslider=function(){var t=this.$target,i=this;t.flexslider({selector:".restaurantpress-food-gallery__wrapper > .restaurantpress-food-gallery__image",animation:rp_single_food_params.flexslider.animation,smoothHeight:rp_single_food_params.flexslider.smoothHeight,directionNav:rp_single_food_params.flexslider.directionNav,controlNav:rp_single_food_params.flexslider.controlNav,slideshow:rp_single_food_params.flexslider.slideshow,animationSpeed:rp_single_food_params.flexslider.animationSpeed,animationLoop:rp_single_food_params.flexslider.animationLoop,allowOneSlide:rp_single_food_params.flexslider.allowOneSlide,start:function(){t.css("opacity",1)},after:function(e){i.initZoomForTarget(i.$images.eq(e.currentSlide))}}),e(".restaurantpress-food-gallery__wrapper .restaurantpress-food-gallery__image:eq(0) .wp-post-image").one("load",function(){var t=e(this);t&&setTimeout(function(){var e=t.closest(".restaurantpress-food-gallery__image").height(),i=t.closest(".flex-viewport");e&&i&&i.height(e)},100)}).each(function(){this.complete&&e(this).load()})},t.prototype.initZoom=function(){this.initZoomForTarget(this.$images.first())},t.prototype.initZoomForTarget=function(t){if(!this.zoom_enabled)return!1;var i=this.$target.width(),o=!1;if(e(t).each(function(t,s){if(e(s).find("img").data("large_image_width")>i)return o=!0,!1}),o){var s={touch:!1};"ontouchstart"in window&&(s.on="click"),t.trigger("zoom.destroy"),t.zoom(s)}},t.prototype.initPhotoswipe=function(){this.zoom_enabled&&this.$images.length>0&&(this.$target.prepend('<a href="#" class="restaurantpress-food-gallery__trigger">üîç</a>'),this.$target.on("click",".restaurantpress-food-gallery__trigger",this.openPhotoswipe)),this.$target.on("click",".restaurantpress-food-gallery__image a",this.openPhotoswipe)},t.prototype.onResetSlidePosition=function(){this.$target.flexslider(0)},t.prototype.getGalleryItems=function(){var t=this.$images,i=[];return t.length>0&&t.each(function(t,o){var s=e(o).find("img"),a={src:s.attr("data-large_image"),w:s.attr("data-large_image_width"),h:s.attr("data-large_image_height"),title:s.attr("data-caption")?s.attr("data-caption"):s.attr("title")};i.push(a)}),i},t.prototype.openPhotoswipe=function(t){t.preventDefault();var i,o=e(".pswp")[0],s=this.getGalleryItems(),a=e(t.target);i=a.is(".restaurantpress-food-gallery__trigger")?this.$target.find(".flex-active-slide"):a.closest(".restaurantpress-food-gallery__image");var r=e.extend({index:e(i).index()},rp_single_food_params.photoswipe_options);new PhotoSwipe(o,PhotoSwipeUI_Default,s,r).init()},e.fn.rp_food_gallery=function(e){return new t(this,e),this},e(".restaurantpress-food-gallery").each(function(){e(this).rp_food_gallery()})});